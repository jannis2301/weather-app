var c=Object.defineProperty;var h=(a,e,s)=>e in a?c(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var n=(a,e,s)=>h(a,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=s(t);fetch(t.href,r)}})();class u{static fetchData(e){return new Promise((s,i)=>{const t=new XMLHttpRequest;t.open("GET",e),t.onreadystatechange=function(){if(t.readyState==XMLHttpRequest.DONE&&t.status==200){const r=JSON.parse(t.responseText);s(r)}else t.readyState==XMLHttpRequest.DONE&&i("Something went wrong")},t.send()})}}class l{constructor(e,s,i){n(this,"cityName");n(this,"description");n(this,"temperature");n(this,"icon");this.cityName=e,this.description=s,this.icon=i,this.temperature=0}}const p={get:function(a,e){return Reflect.get(a,e)},set:function(a,e,s){const i=`${s} Â°C`;return Reflect.set(a,e,i)}},d=void 0;class y{constructor(e){n(this,"el");n(this,"searchButton");n(this,"searchInput");n(this,"weatherContainer");n(this,"weatherDescription");n(this,"weatherCity");n(this,"weatherTemperature");n(this,"weatherIcon");n(this,"loading");n(this,"focusOnEnter",e=>{e.key==="Enter"&&this.searchButton.focus()});this.el=e,this.searchButton=this.el.querySelector(".search-button"),this.searchInput=this.el.querySelector(".search-input"),this.loading=this.el.querySelector(".loading"),this.weatherContainer=this.el.querySelector(".weather"),this.weatherDescription=this.el.querySelector(".weather-description"),this.weatherCity=this.el.querySelector(".weather-city"),this.weatherTemperature=this.el.querySelector(".weather-temperature"),this.weatherIcon=this.el.querySelector(".weather-icon"),this.searchWeather=this.searchWeather.bind(this),this.focusOnEnter=this.focusOnEnter.bind(this),this.init()}searchWeather(){const e=this.searchInput.value.trim();if(e.length===0)return alert("Please enter a city name");this.loading.style.display="block",this.weatherContainer.style.display="none";const s=`http://api.openweathermap.org/data/2.5/weather?q=${e}&units=metric&appid=${d}`;u.fetchData(s).then(i=>{const t=new l(e,i.weather[0].description,i.weather[0].icon),r=new Proxy(t,p),o=i.main.temp;r.temperature=o,this.updateWeather(r)}).catch(i=>alert(i)),this.searchInput.value=""}capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}updateWeather(e){const{cityName:s,description:i,temperature:t,icon:r}=e;this.weatherCity.textContent=this.capitalizeFirstLetter(s),this.weatherDescription.textContent=this.capitalizeFirstLetter(i),this.weatherTemperature.textContent=t.toString(),this.weatherIcon.setAttribute("src",`https://openweathermap.org/img/wn/${r}.png`),this.weatherIcon.setAttribute("alt",`${i}-icon`),this.loading.style.display="none",this.weatherContainer.style.display="grid"}init(){this.searchButton.addEventListener("click",this.searchWeather),this.searchInput.addEventListener("keydown",this.focusOnEnter)}destroy(){this.searchButton.removeEventListener("click",this.searchWeather),this.searchInput.removeEventListener("keydown",this.focusOnEnter)}}const f=document.querySelector(".main"),w=()=>{new y(f)};window.addEventListener("DOMContentLoaded",w);
